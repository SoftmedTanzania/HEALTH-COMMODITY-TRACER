<!DOCTYPE html>
<html lang="en">
<head>
    <title>Health Commodity Tracer</title>

    {%  load static %}

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--===============================================================================================-->
    <link rel="icon" type="image/png" href="{% static "images/icons/favicon.ico" %}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="{% static "fonts/font-awesome-4.7.0/css/font-awesome.min.css" %}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="{% static "fonts/Linearicons-Free-v1.0.0/icon-font.min.css" %}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="{% static "vendor/animate/animate.css" %}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="{% static "vendor/css-hamburgers/hamburgers.min.css" %}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="{% static "vendor/animsition/css/animsition.min.css" %}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="{% static "vendor/select2/select2.min.css" %}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/css/plugins/loaders/loaders.min.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/css/core/colors/palette-loader.css" %}">


    <link rel="stylesheet" type="text/css" href="{% static "css/util.css" %}">

    <link rel="stylesheet" type="text/css" href="{% static "css/custom.css" %}">

    <link rel="stylesheet" type="text/css" href="{% static "css/main.css" %}">

    <link rel="apple-touch-icon" href="{% static "app-assets/images/ico/apple-icon-120.png" %}">
    <link rel="shortcut icon" type="image/x-icon" href="{% static "app-assets/images/ico/favicon.ico" %}">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i%7CQuicksand:300,400,500,700" rel="stylesheet">

    <!-- BEGIN: Vendor CSS-->
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/vendors/css/vendors.min.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/vendors/css/extensions/bootstrap-treeview.min.css" %}">
    <!-- END: Vendor CSS-->

    <!-- BEGIN: Theme CSS-->
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/css/bootstrap.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/css/bootstrap-extended.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/css/colors.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/css/components.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/vendors/css/ui/jquery-ui.min.css" %}">
    <!-- END: Theme CSS-->

    <!-- BEGIN: Page CSS-->
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/css/core/menu/menu-types/vertical-compact-menu.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/fonts/mobiriseicons/24px/mobirise/style.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/vendors/css/charts/jquery-jvectormap-2.0.3.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/vendors/css/charts/morris.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/fonts/simple-line-icons/style.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/css/core/colors/palette-gradient.css" %}">

    <link rel="stylesheet" type="text/css" href="{% static "app-assets/vendors/css/charts/chartist.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/vendors/css/charts/chartist-plugin-tooltip.css" %}">
    <!-- END: Page CSS-->

    <!-- BEGIN: Custom CSS-->
    <!-- END: Custom CSS-->
    <link rel="apple-touch-icon" href="{% static "app-assets/images/ico/apple-icon-120.png" %}">
    <link rel="shortcut icon" type="image/x-icon" href="{% static "app-assets/images/ico/favicon.ico" %}">

    <!-- BEGIN: Vendor CSS-->
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/vendors/css/vendors.min.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/vendors/css/pickers/daterange/daterangepicker.css" %}">
    <!-- END: Vendor CSS-->

    <!-- BEGIN: Theme CSS-->
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/css/bootstrap.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/css/bootstrap-extended.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/css/colors.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/css/components.css" %}">
    <!-- END: Theme CSS-->

    <!-- BEGIN: Custom CSS-->
    <link rel="stylesheet" type="text/css" href="{% static "assets/css/style.css" %}">
    <!-- END: Custom CSS-->


    <!-- BEGIN: Vendor CSS-->
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/vendors/css/pickers/daterange/daterangepicker.css" %}">
    <!-- END: Vendor CSS-->


    <!-- BEGIN: Page CSS-->
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/css/plugins/forms/wizard.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/css/plugins/pickers/daterange/daterange.css" %}">

    <!-- BEGIN: Page CSS-->
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/css/plugins/extensions/toastr.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/css/plugins/ui/jqueryui.css" %}">

    <link rel="stylesheet" type="text/css" href="{% static "app-assets/css/pages/timeline.css" %}">
    {#    <link rel="stylesheet" type="text/css" href="{% static "app-assets/css/pages/dashboard-ecommerce.css" %}">#}
    <!-- END: Page CSS-->
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/vendors/css/editors/summernote.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/vendors/css/editors/codemirror.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/vendors/css/editors/theme/monokai.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "app-assets/css/pages/app-chat.css" %}">

    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/css/select2.min.css" rel="stylesheet" />

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/jstree/3.3.8/themes/default/style.min.css" />
</head>

{%  block content %}






{%  endblock %}

<!-- END: Content-->



<!-- BEGIN: Vendor JS-->
<!-- BEGIN: Vendor JS-->
<script src="{% static "app-assets/vendors/js/vendors.min.js" %}"></script>
<!-- BEGIN Vendor JS-->

<script src="{% static "app-assets/vendors/js/charts/chart.min.js" %}"></script>
<script src="{% static "app-assets/vendors/js/charts/raphael-min.js" %}"></script>
<script src="{% static "app-assets/vendors/js/charts/morris.min.js" %}"></script>
<script src="{% static "app-assets/vendors/js/charts/jvector/jquery-jvectormap-2.0.3.min.js" %}"></script>
<script src="{% static "app-assets/vendors/js/charts/jvector/jquery-jvectormap-world-mill.js" %}"></script>
<script src="{% static "app-assets/data/jvector/visitor-data.js" %}"></script>
<!-- END: Page Vendor JS-->

<!-- BEGIN: Theme JS-->
<script src="{% static "app-assets/js/core/app-menu.js" %}"></script>
<script src="{% static "app-assets/js/core/app.js" %}"></script>
<!-- END: Theme JS-->

<!-- BEGIN: Page JS-->
<script src="{% static "app-assets/js/scripts/pages/dashboard-sales.js" %}"></script>
<!-- END: Page JS-->

<!-- BEGIN: Page Vendor JS-->
<script src="{% static "app-assets/vendors/js/extensions/jquery.steps.min.js" %}"></script>
<script src="{% static "app-assets/vendors/js/pickers/dateTime/moment-with-locales.min.js" %}"></script>
<script src="{% static "app-assets/vendors/js/pickers/daterange/daterangepicker.js" %}"></script>
<script src="{% static "app-assets/vendors/js/forms/validation/jquery.validate.min.js" %}"></script>
<!-- END: Page Vendor JS-->

<script src="{% static "app-assets/js/scripts/forms/wizard-steps.js" %}"></script>

<!-- BEGIN: Page Vendor JS-->
<script src="{% static "app-assets/vendors/js/extensions/listjs/list.min.js" %}"></script>
<script src="{% static "app-assets/vendors/js/extensions/listjs/list.fuzzysearch.min.js" %}"></script>
<script src="{% static "app-assets/vendors/js/extensions/listjs/list.pagination.min.js" %}"></script>
<!-- END: Page Vendor JS-->

<!-- BEGIN: Page JS-->
<script src="{% static "app-assets/js/scripts/extensions/list.js" %}"></script>
<!-- BEGIN: Page Vendor JS-->
<script src="{% static "app-assets/vendors/js/extensions/sweetalert.min.js" %}"></script>
<!-- END: Page Vendor JS-->
<!-- BEGIN: Page JS-->
<script src="{% static "app-assets/js/scripts/extensions/sweet-alerts.js" %}"></script>

<!-- BEGIN: Page Vendor JS-->
<script src="{% static "app-assets/vendors/js/animation/jquery.appear.js" %}"></script>
<!-- END: Page Vendor JS-->

<!-- BEGIN: Page JS-->
<script src="{% static "app-assets/js/scripts/animation/animation.js" %}"></script>


<!-- BEGIN: Page JS-->
<script src="{% static "app-assets/js/scripts/forms/switch.js" %}"></script>

<!-- BEGIN: Page JS-->
<script src="{% static "app-assets/js/scripts/dropdowns/dropdowns.js" %}"></script>
<script src="{% static "app-assets/vendors/js/forms/icheck/icheck.min.js" %}"></script>

<!-- BEGIN: Page Vendor JS-->
<script src="{% static "app-assets/vendors/js/extensions/toastr.min.js" %}"></script>
<!-- END: Page Vendor JS-->

<!-- BEGIN: Page JS-->
<script src="{% static "app-assets/js/scripts/extensions/toastr.js" %}"></script>

<!-- BEGIN: Page Vendor JS-->
<script src="{% static "app-assets/js/core/libraries/jquery_ui/jquery-ui.min.js" %}"></script>
<!-- END: Page Vendor JS-->

<!-- BEGIN: Page JS-->
<script src="{% static "app-assets/js/scripts/ui/jquery-ui/date-pickers.js" %}"></script>


<!-- BEGIN: Page Vendor JS-->
{#<script src="{% static "app-assets/vendors/js/charts/chartist.min.js" %}"></script>#}
{#<script src="{% static "app-assets/vendors/js/charts/chartist-plugin-tooltip.min.js" %}"></script>#}
{#<script src="{% static "app-assets/vendors/js/timeline/horizontal-timeline.js" %}"></script>#}
{#<script src="{% static "app-assets/js/scripts/pages/dashboard-ecommerce.js" %}"></script>#}

<script src="{% static "app-assets/vendors/js/forms/toggle/bootstrap-checkbox.min.js" %}"></script>
<!-- BEGIN: Page Vendor JS-->
<script src="{% static "app-assets/vendors/js/forms/toggle/bootstrap-switch.min.js" %}"></script>
<script src="{% static "app-assets/vendors/js/forms/toggle/switchery.min.js" %}"></script>
<script src="{% static "app-assets/vendors/js/extensions/bootstrap-treeview.min.js" %}"></script>
{#<script src="{% static "app-assets/js/scripts/extensions/tree-view.js" %}"></script>#}
<script src="{% static "app-assets/js/scripts/pages/app-email.js" %}"></script>
<script src="{% static "app-assets/js/scripts/pages/app-chat.js" %}"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/js/select2.min.js"></script>

<script src="https://code.highcharts.com/highcharts.src.js"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>

<script src="http://code.highcharts.com/maps/highmaps.js"></script>
<script src="http://code.highcharts.com/maps/modules/map.js"></script>
<script src="https://code.highcharts.com/maps/modules/exporting.js"></script>
<script src="https://code.highcharts.com/maps/modules/offline-exporting.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/js/select2.min.js"></script>
<script src="{% static "app-assets/vendors/js/pickers/dateTime/moment-with-locales.min.js" %}"></script>
<script src="{% static "app-assets/vendors/js/pickers/daterange/daterangepicker.js" %}"></script>
<script src="{% static "app-assets/js/scripts/dropdowns/dropdowns.js" %}"></script>
<script src="{% static "app-assets/js/scripts/ui/jquery-ui/date-pickers.js" %}"></script>

<script>

    $('.switch').checkboxpicker();

    Highcharts.chart('container_bar', {
        chart: {
            type: 'bar',

        },
        title: {
            text: 'Average Stock On Hand vs Average Monthly Consumption Bar Chart'
        },
        xAxis: {
            categories: [

                {% for entry in aggregated_transactions %}'{{ entry.posting_schedule__health_commodity_balance__health_commodity__health_commodity_name }} '{% if not forloop.last %}, {% endif %}{% endfor %}
            ]
        },
        series: [{
            name: 'Average Stock on Hand',
            data: [
                {% for entry in aggregated_transactions %}{{ entry.average }}{% if not forloop.last %}, {% endif %}{% endfor %}
            ],
            color: 'DodgerBlue'

        }
            , {
                name: 'Average Monthly Consumption',
                data: [
                    {% for entry in aggregated_transactions %}{{ entry.average_consumption }}{% if not forloop.last %}, {% endif %}{% endfor %}
                ],
                color: 'OliveDrab'
            }
        ]


    });

{#    Highcharts.chart('container_line', {#}
{#        chart: {#}
{#            type: 'line',#}
{#            events: {#}
{#                load: function (event) {#}
{##}
{#                    var availableQty = this.series[0];#}
{#                    var consumedQty = this.series[1];#}
{##}
{#                    var availableQtys = availableQty.data;#}
{#                    var consumedQtys = availableQty.data;#}
{##}
{##}
{#                    for (var i = 0; i < availableQtys.length; i++) {#}
{#                        var theDataPoint = availableQtys[i].y;#}
{#                        var theCompDataPoint = consumedQtys[i].y;#}
{##}
{#                        var ratio = theDataPoint/theCompDataPoint;#}
{##}
{#                        if (0 > ratio <= 0.5) {#}
{#                            console.log(availableQty);#}
{#                            availableQty.points[i].update({#}
{#                                color: 'maroon'#}
{#                            });#}
{#                        }#}
{#                        else{#}
{##}
{#                            if (0.5 > ratio <= 3){#}
{##}
{#                                console.log(availableQty);#}
{#                                availableQty.points[i].update({#}
{#                                    color: 'yellow'#}
{#                                });#}
{#                            }#}
{##}
{#                            else{#}
{##}
{#                                if (3 > ratio <= 6)#}
{#                                {#}
{#                                    console.log(availableQty);#}
{#                                    availableQty.points[i].update({#}
{#                                        color: 'green'#}
{#                                    });#}
{#                                }#}
{##}
{#                                else {#}
{##}
{#                                    console.log(availableQty);#}
{#                                    availableQty.points[i].update({#}
{#                                        color: 'blue'#}
{#                                    });#}
{#                                }#}
{#                            }#}
{##}
{##}
{#                        }#}
{##}
{#                    }#}
{##}
{#                }#}
{#            }#}
{##}
{#        },#}
{#        title: {#}
{#            text: 'Line Graph'#}
{#        },#}
{#        xAxis: {#}
{#            categories: [#}
{##}
{#                {% for entry in aggregated_transactions %}'{{ entry.posting_schedule__health_commodity_balance__health_commodity__health_commodity_name }} '{% if not forloop.last %}, {% endif %}{% endfor %}#}
{#            ]#}
{#        },#}
{#        series: [{#}
{#            name: 'Average Quantity Available',#}
{#            data: [#}
{#                {% for entry in aggregated_transactions %}{{ entry.average }}{% if not forloop.last %}, {% endif %}{% endfor %}#}
{#            ],#}
{#            color: 'DodgerBlue',#}
{#        }#}
{#            , {#}
{#                name: 'Quantity Consumed from eLIMS',#}
{#                data: [#}
{#                    {% for entry in aggregated_transactions %}{{ entry.average_consumption }}{% if not forloop.last %}, {% endif %}{% endfor %}#}
{#                ],#}
{#                color: 'OliveDrab'#}
{#            }#}
{#        ]#}
{##}
{##}
{#    });#}

    Highcharts.chart('container_area', {
        chart: {
            type: 'areaspline',
        },
        title: {
            text: 'Average Stock On Hand vs Average Monthly Consumption Area Spline Chart'
        },
        xAxis: {
            categories: [

                {% for entry in aggregated_transactions %}'{{ entry.posting_schedule__health_commodity_balance__health_commodity__health_commodity_name }} '{% if not forloop.last %}, {% endif %}{% endfor %}
            ]
        },
        series: [{
            name: 'Average Stock on Hand',
            data: [
                {% for entry in aggregated_transactions %}{{ entry.average }}{% if not forloop.last %}, {% endif %}{% endfor %}
            ],
            color: 'DodgerBlue  '
        }
            , {
                name: 'Average Monthly Consumption',
                data: [
                    {% for entry in aggregated_transactions %}{{ entry.average_consumption }}{% if not forloop.last %}, {% endif %}{% endfor %}
                ],
                color: 'OliveDrab '
            }

        ]


    });

</script>


</html>